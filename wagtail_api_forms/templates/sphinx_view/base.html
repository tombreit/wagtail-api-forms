{% load static %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>
            {% block title %}{% endblock %}
        </title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" type="text/css" href="{% static 'dist/css/app.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'dist/css/docs.css' %}">
        <style>
            .navbar-header {
                background-image: url('{{ brand_logo_de_url }}');
            }
        </style>

        {% comment %}
        <script data-url_root="./" id="documentation_options" src="{% static 'documentation_options.js' %}"></script>
        <script src="{% static 'jquery.js' %}"></script>
        <script src="{% static 'underscore.js' %}"></script>
        <script src="{% static '_sphinx_javascript_frameworks_compat.js' %}"></script>
        <script src="{% static 'doctools.js' %}"></script>
        <script src="{% static 'translations.js' %}"></script>
        <script src="{% static 'searchtools.js' %}"></script>
        <script src="{% static 'language_data.js' %}"></script>
        <script src="{% url 'sphinx_searchindex_view' %}" defer></script>
        {% endcomment %}
    </head>
    <body>

    <header>
        <div class="container">

            <div class="navbar-header">
            </div>

            <nav class="navbar navbar-expand-lg">
                <a class="navbar-brand" href="/docs/">
                    Forms Documentation
                </a>
            </nav>

        </div>
    </header>

    <div class="container">
        <div class="row">
            <div class="col-md-3">
                <h4>TOC</h4>
                {{ doc.toctree|safe }}

                {% comment %}
                {% block toc %}{% endblock %}
                <hr>
                <form action="/docs/search/" method="get">
                    <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
                    <input type="submit" value="search" />
                    <span id="search-progress" style="padding-left: 10px"></span>
                </form>
                {% endcomment %}

            </div>
            <div class="col-md-9">
                {% if request.path == '/docs/search/' %}
                    <div id="search-results"></div>
                {% else %}
                    {% block doc %}{% endblock %}
                {% endif %}
            </div>
        </div>
    </div>

    {% include 'includes/_footer.html' %}

    {% comment %}
    <script>
        document.addEventListener("DOMContentLoaded", function(event) { 

            console.log("Loading searchindex.json...")
            // const url = '/docs/searchindex.json';

            // fetch(url)
            // .then( response => {
            //     if (!response.ok) {
            //         throw new Error(`HTTP error: ${response.status}`);
            //     }
            //     return response.json();
            // })
            // .then( json => Search.setIndex(json) )
            // .catch( err => console.error(`Fetch problem: ${err.message}`) );

            console.log(DOCUMENTATION_OPTIONS);

            console.log("load...");
            const searchResults = document.querySelectorAll("#search-results ul.search li");
            console.log(searchResults)
        });
        </script>
        {% endcomment %}
    </body>
</html>
